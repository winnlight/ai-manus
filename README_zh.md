# AI Manus

[English](README.md) | ä¸­æ–‡

[![GitHub stars](https://img.shields.io/github/stars/simpleyyt/ai-manus?style=social)](https://github.com/simpleyyt/ai-manus/stargazers)
&ensp;
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

AI Manus æ˜¯ä¸€ä¸ªé€šç”¨çš„ AI Agent ç³»ç»Ÿï¼Œæ”¯æŒåœ¨æ²™ç›’ç¯å¢ƒä¸­è¿è¡Œå„ç§å·¥å…·å’Œæ“ä½œã€‚

ç”¨ AI Manus å¼€å¯ä½ çš„æ™ºèƒ½ä½“ä¹‹æ—…å§ï¼

ğŸ‘ æ¬¢è¿åŠ å…¥ [QQç¾¤(1005477581)](https://qun.qq.com/universal-share/share?ac=1&authKey=p4X3Da5iMpR4liAenxwvhs7IValPKiCFtUevRlJouz9qSTSZsMnPJc3hzsJjgQYv&busi_data=eyJncm91cENvZGUiOiIxMDA1NDc3NTgxIiwidG9rZW4iOiJNZmUrTmQ0UzNDZDNqNDFVdjVPS1VCRkJGRWVlV0R3RFJSRVFoZDAwRjFDeUdUM0t6aUIyczlVdzRjV1BYN09IIiwidWluIjoiMzQyMjExODE1In0%3D&data=C3B-E6BlEbailV32co77iXL5vxPIhtD9y_itWLSq50hKqosO_55_isOZym2Faaq4hs9-517tUY8GSWaDwPom-A&svctype=4&tempid=h5_group_info)

## ç¤ºä¾‹

### åŸºæœ¬åŠŸèƒ½

https://github.com/user-attachments/assets/37060a09-c647-4bcb-920c-959f7fa73ebe

### Browser Use

* ä»»åŠ¡ï¼šllm æœ€æ–°è®ºæ–‡

https://github.com/user-attachments/assets/8f7788a4-fbda-49f5-b836-949a607c64ac

### Code Use

* ä»»åŠ¡ï¼šå†™ä¸€ä¸ªå¤æ‚çš„ python ç¤ºä¾‹

https://github.com/user-attachments/assets/5cb2240b-0984-4db0-8818-a24f81624b04


## ä¸»è¦ç‰¹æ€§

 * éƒ¨ç½²ï¼šæœ€å°åªéœ€è¦ä¸€ä¸ª LLM æœåŠ¡å³å¯å®Œæˆéƒ¨ç½²ï¼Œä¸éœ€è¦ä¾èµ–å…¶å®ƒå¤–éƒ¨æœåŠ¡ã€‚
 * å·¥å…·ï¼šæ”¯æŒ Terminalã€Browserã€Fileã€Web Searchã€æ¶ˆæ¯å·¥å…·ï¼Œå¹¶æ”¯æŒå®æŸ¥çœ‹å’Œæ¥ç®¡ã€‚
 * æ²™ç›’ï¼šæ¯ä¸ª Task ä¼šåˆ†é…å•ç‹¬çš„ä¸€ä¸ªæ²™ç›’ï¼Œæ²™ç›’åœ¨æœ¬åœ° Dock ç¯å¢ƒé‡Œé¢è¿è¡Œã€‚
 * ä»»åŠ¡ä¼šè¯ï¼šé€šè¿‡ Mongo/Redis å¯¹ä¼šè¯å†å²è¿›è¡Œç®¡ç†ï¼Œæ”¯æŒåå°ä»»åŠ¡ã€‚
 * å¯¹è¯ï¼šæ”¯æŒåœæ­¢ä¸æ‰“æ–­ã€‚
 * å¤šè¯­è¨€ï¼šæ”¯æŒä¸­æ–‡ä¸è‹±æ–‡ã€‚

## å¼€å‘è®¡åˆ’

 * å·¥å…·ï¼šæ”¯æŒå†å²æµè§ˆå™¨æˆªå›¾æŸ¥çœ‹ï¼Œæ”¯æŒ Deploy & Exposeï¼Œæ”¯æŒå¤–éƒ¨ MCP å·¥å…·é›†æˆã€‚
 * å¯¹è¯ï¼šæ”¯æŒæ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½ã€‚
 * æ²™ç›’ï¼šæ”¯æŒæ‰‹æœºä¸ Windows ç”µè„‘æ¥å…¥ã€‚
 * éƒ¨ç½²ï¼šæ”¯æŒ K8s å’Œ Dock Swarm å¤šé›†ç¾¤éƒ¨ç½²ã€‚
 * è®¤è¯ï¼šç”¨æˆ·ç™»å½•ä¸è®¤è¯ã€‚

## ç¯å¢ƒè¦æ±‚

æœ¬é¡¹ç›®ä¸»è¦ä¾èµ–Dockerè¿›è¡Œå¼€å‘ä¸éƒ¨ç½²ï¼Œéœ€è¦å®‰è£…è¾ƒæ–°ç‰ˆæœ¬çš„Dockerï¼š
- Docker 20.10+
- Docker Compose

æ¨¡å‹èƒ½åŠ›è¦æ±‚ï¼š
- å…¼å®¹OpenAIæ¥å£
- æ”¯æŒFunctionCall
- æ”¯æŒJson Formatè¾“å‡º

æ¨èä½¿ç”¨Deepseekä¸GPTæ¨¡å‹ã€‚


## éƒ¨ç½²æŒ‡å—

æ¨èä½¿ç”¨Docker Composeè¿›è¡Œéƒ¨ç½²ï¼š

```yaml
services:
  frontend:
    image: simpleyyt/manus-frontend
    ports:
      - "5173:80"
    depends_on:
      - backend
    restart: unless-stopped
    networks:
      - manus-network
    environment:
      - BACKEND_URL=http://backend:8000

  backend:
    image: simpleyyt/manus-backend
    depends_on:
      - sandbox
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      - manus-network
    environment:
      # OpenAI API base URL
      - API_BASE=https://api.openai.com/v1
      # OpenAI API key, replace with your own
      - API_KEY=sk-xxxx
      # LLM model name
      - MODEL_NAME=gpt-4o
      # LLM temperature parameter, controls randomness
      - TEMPERATURE=0.7
      # Maximum tokens for LLM response
      - MAX_TOKENS=2000
      
      # MongoDB connection URI (optional)
      #- MONGODB_URI=mongodb://mongodb:27017
      # MongoDB database name (optional)
      #- MONGODB_DATABASE=manus
      # MongoDB username (optional)
      #- MONGODB_USERNAME=
      # MongoDB password (optional)
      #- MONGODB_PASSWORD=
      
      # Redis server hostname (optional)
      #- REDIS_HOST=redis
      # Redis server port (optional)
      #- REDIS_PORT=6379
      # Redis database number (optional)
      #- REDIS_DB=0
      # Redis password (optional)
      #- REDIS_PASSWORD=
      
      # Sandbox server address (optional)
      #- SANDBOX_ADDRESS=
      # Docker image used for the sandbox
      - SANDBOX_IMAGE=simpleyyt/manus-sandbox
      # Prefix for sandbox container names
      - SANDBOX_NAME_PREFIX=sandbox
      # Time-to-live for sandbox containers in minutes
      - SANDBOX_TTL_MINUTES=30
      # Docker network for sandbox containers
      - SANDBOX_NETWORK=manus-network
      # Chrome browser arguments for sandbox (optional)
      #- SANDBOX_CHROME_ARGS=
      # HTTPS proxy for sandbox (optional)
      #- SANDBOX_HTTPS_PROXY=
      # HTTP proxy for sandbox (optional)
      #- SANDBOX_HTTP_PROXY=
      # No proxy hosts for sandbox (optional)
      #- SANDBOX_NO_PROXY=
      
      # Google Search API key for web search capability (optional)
      #- GOOGLE_SEARCH_API_KEY=
      # Google Custom Search Engine ID (optional)
      #- GOOGLE_SEARCH_ENGINE_ID=
      
      # Application log level
      - LOG_LEVEL=INFO

  sandbox:
    image: simpleyyt/manus-sandbox
    command: /bin/sh -c "exit 0"  # prevent sandbox from starting, ensure image is pulled
    restart: "no"
    networks:
      - manus-network

  mongodb:
    image: mongo:7.0
    volumes:
      - mongodb_data:/data/db
    restart: unless-stopped
    #ports:
    #  - "27017:27017"
    networks:
      - manus-network

  redis:
    image: redis:7.0
    restart: unless-stopped
    networks:
      - manus-network

volumes:
  mongodb_data:
    name: manus-mongodb-data

networks:
  manus-network:
    name: manus-network
    driver: bridge
```

ä¿å­˜æˆ`docker-compose.yml`æ–‡ä»¶ï¼Œå¹¶è¿è¡Œ

```shell
docker compose up -d
```

> æ³¨æ„ï¼šå¦‚æœæç¤º`sandbox-1 exited with code 0`ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œè¿™æ˜¯ä¸ºäº†è®© sandbox é•œåƒæˆåŠŸæ‹‰å–åˆ°æœ¬åœ°ã€‚

æ‰“å¼€æµè§ˆå™¨è®¿é—®<http://localhost:5173>å³å¯è®¿é—® Manusã€‚

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

æœ¬é¡¹ç›®ç”±ä¸‰ä¸ªç‹¬ç«‹çš„å­é¡¹ç›®ç»„æˆï¼š

* `frontend`: manus å‰ç«¯
* `backend`: Manus åç«¯
* `sandbox`: Manus æ²™ç›’

### æ•´ä½“è®¾è®¡

![Image](https://github.com/user-attachments/assets/69775011-1eb7-452f-adaf-cd6603a4dde5)

**å½“ç”¨æˆ·å‘èµ·å¯¹è¯æ—¶ï¼š**

1. Web å‘ Server å‘é€åˆ›å»º Agent è¯·æ±‚ï¼ŒServer é€šè¿‡`/var/run/docker.sock`åˆ›å»ºå‡º Sandboxï¼Œå¹¶è¿”å›ä¼šè¯ IDã€‚
2. Sandbox æ˜¯ä¸€ä¸ª Ubuntu Docker ç¯å¢ƒï¼Œé‡Œé¢ä¼šå¯åŠ¨ chrome æµè§ˆå™¨åŠ File/Shell ç­‰å·¥å…·çš„ API æœåŠ¡ã€‚
3. Web å¾€ä¼šè¯ ID ä¸­å‘é€ç”¨æˆ·æ¶ˆæ¯ï¼ŒServer æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯å‘é€ç»™ PlanAct Agent å¤„ç†ã€‚
4. PlanAct Agent å¤„ç†è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨ç›¸å…³å·¥å…·å®Œæˆä»»åŠ¡ã€‚
5. Agent å¤„ç†è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ‰€æœ‰äº‹ä»¶é€šè¿‡ SSE å‘å› Webã€‚

**å½“ç”¨æˆ·æµè§ˆå·¥å…·æ—¶ï¼š**

- æµè§ˆå™¨ï¼š
    1. Sandbox çš„æ— å¤´æµè§ˆå™¨é€šè¿‡ xvfb ä¸ x11vnc å¯åŠ¨äº† vnc æœåŠ¡ï¼Œå¹¶ä¸”é€šè¿‡ websockify å°† vnc è½¬åŒ–æˆ websocketã€‚
    2. Web çš„ NoVNC ç»„ä»¶é€šè¿‡ Server çš„ Websocket Forward è½¬å‘åˆ° Sandboxï¼Œå®ç°æµè§ˆå™¨æŸ¥çœ‹ã€‚
- å…¶å®ƒå·¥å…·ï¼šå…¶å®ƒå·¥å…·åŸç†ä¹Ÿæ˜¯å·®ä¸å¤šã€‚

### ç¯å¢ƒå‡†å¤‡

1. ä¸‹è½½é¡¹ç›®ï¼š
```bash
git clone https://github.com/simpleyyt/ai-manus.git
cd ai-manus
```

2. å¤åˆ¶é…ç½®æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

3. ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š
```
# Model provider configuration
API_KEY=
API_BASE=http://mockserver:8090/v1

# Model configuration
MODEL_NAME=deepseek-chat
TEMPERATURE=0.7
MAX_TOKENS=2000

# MongoDB configuration
#MONGODB_URI=mongodb://mongodb:27017
#MONGODB_DATABASE=manus
#MONGODB_USERNAME=
#MONGODB_PASSWORD=

# Redis configuration
#REDIS_HOST=redis
#REDIS_PORT=6379
#REDIS_DB=0
#REDIS_PASSWORD=

# Sandbox configuration
SANDBOX_IMAGE=simpleyyt/manus-sandbox
SANDBOX_NAME_PREFIX=sandbox
SANDBOX_TTL_MINUTES=30
SANDBOX_NETWORK=manus-network
#SANDBOX_CHROME_ARGS=
#SANDBOX_HTTPS_PROXY=
#SANDBOX_HTTP_PROXY=
#SANDBOX_NO_PROXY=

# Optional: Google search configuration
#GOOGLE_SEARCH_API_KEY=
#GOOGLE_SEARCH_ENGINE_ID=

# Log configuration
LOG_LEVEL=INFO
```

### å¼€å‘è°ƒè¯•

1. è¿è¡Œè°ƒè¯•ï¼š
```bash
# ç›¸å½“äº docker compose -f docker-compose-development.yaml up
./dev.sh up
```

å„æœåŠ¡ä¼šä»¥ reload æ¨¡å¼è¿è¡Œï¼Œä»£ç æ”¹åŠ¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚æš´éœ²çš„ç«¯å£å¦‚ä¸‹ï¼š
- 5173: Webå‰ç«¯ç«¯å£
- 8000: Server APIæœåŠ¡ç«¯å£
- 8080: Sandbox APIæœåŠ¡ç«¯å£
- 5900: Sandbox VNCç«¯å£
- 9222: Sandbox Chromeæµè§ˆå™¨CDPç«¯å£

> *æ³¨æ„ï¼šåœ¨ Debug æ¨¡å¼å…¨å±€åªä¼šå¯åŠ¨ä¸€ä¸ªæ²™ç›’*

2. å½“ä¾èµ–å˜åŒ–æ—¶ï¼ˆrequirements.txtæˆ–package.jsonï¼‰ï¼Œæ¸…ç†å¹¶é‡æ–°æ„å»ºï¼š
```bash
# æ¸…ç†æ‰€æœ‰ç›¸å…³èµ„æº
./dev.sh down -v

# é‡æ–°æ„å»ºé•œåƒ
./dev.sh build

# è°ƒè¯•è¿è¡Œ
./dev.sh up
```

### é•œåƒå‘å¸ƒ

```bash
export IMAGE_REGISTRY=your-registry-url
export IMAGE_TAG=latest

# æ„å»ºé•œåƒ
./run build

# æ¨é€åˆ°ç›¸åº”çš„é•œåƒä»“åº“
./run push
```
